<h2 class="content-subhead">Problem Description</h2><p>Write as program to manage a set of accounts within a binary file. An account has the following information.</p>
<h3 class="content-subhead">account.h</h3><pre><code class="lang-c"><span class="fw-code-copy-button pure-button"><i class="fa fa-clipboard"></i></span><div id="highlighter_235896" class="syntaxhighlighter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="preprocessor">#ifndef _ACCOUNT_H</code></div><div class="line number2 index1 alt1"><code class="preprocessor">#define _ACCOUNT_H</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="keyword bold">typedef</code> <code class="keyword bold">struct</code> <code class="plain">account {</code></div><div class="line number5 index4 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold">int</code> <code class="plain">balance;</code></div><div class="line number6 index5 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold">int</code> <code class="plain">accountNum;</code></div><div class="line number7 index6 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold">int</code> <code class="plain">zipcode;</code></div><div class="line number8 index7 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold">int</code> <code class="plain">age;</code></div><div class="line number9 index8 alt2"><code class="plain">} Account;</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="preprocessor">#endif</code></div></div></td></tr></tbody></table></div>
</code></pre>
<p>First you need to read the name of the file from the standard input. After you read the account information from the file, you need to write a summary report. </p>
<ul>
<li>A sorted listing according to increasing <code>accountNum</code>. All <code>accountNum</code> are different.</li>
<li>A summary according to the preprocessor flag <code>SORTBY</code><ul>
<li>If the <code>SORTBY</code> flag is <code>ZIPCODE</code>, then you need to print the sum of balance of all accounts from the same zipcode, sorted by increasing zip code.</li>
<li>If the <code>SORTBY</code> flag is <code>AGE</code>, then you need to print the sum of balance of all accounts from the same age, sorted by increasing age.</li>
</ul>
</li>
</ul>
<p>You may assume that the constants AGE and ZIPCODE are 1 and 2 respectively. </p>
<h2 class="content-subhead">Subtasks</h2><ul>
<li>5pt. There is only one record in the file, and the <code>SORTBY</code> flag is <code>ZIPCODE</code>.</li>
<li>10pt. There are no more than 3 records in the file, all zip codes are different, and the <code>SORTBY</code> flag is <code>ZIPCODE</code>.</li>
<li>15pt. There are no more than 10 records in the file, some zip codes may be the same, and the <code>SORTBY</code> flag is <code>ZIPCODE</code>.</li>
<li>20pt. There are no more than 1000 records in the file, and the <code>SORTBY</code> flag is <code>AGE</code>.</li>
<li>50pt. There are no more than 100000 records in the file.</li>
</ul>
<h2 class="content-subhead">Hints</h2><p>If we sort the array according to a field, it becomes much easier to sum up all balance from that field.</p>
<h2 class="content-subhead">Sample Input</h2><pre><code><span class="fw-code-copy-button pure-button"><i class="fa fa-clipboard"></i></span><div id="highlighter_665477" class="syntaxhighlighter nogutter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain">p10075-sample.bin</code></div></div></td></tr></tbody></table></div>
</code></pre><p><a href="/downloads/p10075-sample.bin">file download</a></p>
<h2 class="content-subhead">Sample Output (if a <code>#define SORTBY ZIPCODE</code> is defined)</h2><pre><code><span class="fw-code-copy-button pure-button"><i class="fa fa-clipboard"></i></span><div id="highlighter_213425" class="syntaxhighlighter nogutter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain">account, age, zipcode, balance</code></div><div class="line number2 index1 alt1"><code class="plain">0, 24, 100, 6000</code></div><div class="line number3 index2 alt2"><code class="plain">2, 24, 101, 6200</code></div><div class="line number4 index3 alt1"><code class="plain">3, 25, 100, 6500</code></div><div class="line number5 index4 alt2"><code class="plain">5, 24, 100, 6300</code></div><div class="line number6 index5 alt1"><code class="plain">7, 26, 101, 6000</code></div><div class="line number7 index6 alt2"><code class="plain">zipcode, sum_balance</code></div><div class="line number8 index7 alt1"><code class="plain">100, 18800</code></div><div class="line number9 index8 alt2"><code class="plain">101, 12200</code></div></div></td></tr></tbody></table></div>
</code></pre><h2 class="content-subhead">Sample Output (if a <code>#define SORTBY AGE</code> is defined)</h2><pre><code><span class="fw-code-copy-button pure-button"><i class="fa fa-clipboard"></i></span><div id="highlighter_118920" class="syntaxhighlighter nogutter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain">account, age, zipcode, balance</code></div><div class="line number2 index1 alt1"><code class="plain">0, 24, 100, 6000</code></div><div class="line number3 index2 alt2"><code class="plain">2, 24, 101, 6200</code></div><div class="line number4 index3 alt1"><code class="plain">3, 25, 100, 6500</code></div><div class="line number5 index4 alt2"><code class="plain">5, 24, 100, 6300</code></div><div class="line number6 index5 alt1"><code class="plain">7, 26, 101, 6000</code></div><div class="line number7 index6 alt2"><code class="plain">age, sum_balance</code></div><div class="line number8 index7 alt1"><code class="plain">24, 18500</code></div><div class="line number9 index8 alt2"><code class="plain">25, 6500</code></div><div class="line number10 index9 alt1"><code class="plain">26, 6000</code></div></div></td></tr></tbody></table></div>
</code></pre><h2 class="content-subhead">Compile</h2><pre><code><span class="fw-code-copy-button pure-button"><i class="fa fa-clipboard"></i></span><div id="highlighter_376142" class="syntaxhighlighter nogutter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain">$ gcc -std=c99 -O2 a.c -DSORTBY=ZIPCODE -DAGE=1 -DZIPCODE=2 -o testzip.out</code></div><div class="line number2 index1 alt1"><code class="plain">$ gcc -std=c99 -O2 a.c -DSORTBY=AGE -DAGE=1 -DZIPCODE=2 -o testage.out</code></div></div></td></tr></tbody></table></div>
</code></pre><h2 class="content-subhead">part of main.c</h2><pre><code><span class="fw-code-copy-button pure-button"><i class="fa fa-clipboard"></i></span><div id="highlighter_791167" class="syntaxhighlighter nogutter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="preprocessor">#define AGE 1</code></div><div class="line number2 index1 alt1"><code class="preprocessor">#define ZIPCODE 2</code></div></div></td></tr></tbody></table></div>
</code></pre>