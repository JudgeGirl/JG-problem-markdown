<h2 class="content-subhead">背景描述</h2><p><div class="pure-u-g"><div class="pure-u-5-5"><a clss="" title=我們中出了個叛徒，現在開始進行異端審問會 href=http://i.imgur.com/dYvAfDM.jpg><img class="pure-img-responsive" src="http://i.imgur.com/dYvAfDM.jpg" alt="我們中出了個叛徒，現在開始進行異端審問會"></img></a><span class="caption">我們中出了個叛徒，現在開始進行異端審問會</span></div></div></p>
<h2 class="content-subhead">題目描述</h2><p>學會 function 和 pointer 之後，總要來點 function pointer 才行。你的目標要完成 <code>myint.c</code> 中三個函數。在 <code>madd()</code>、<code>msub()</code>、<code>getmyheart()</code> 三個函數中，其中 <code>madd()</code> 和 <code>msub()</code> 只需要完成兩個整數的加法和減法即可。而在 <code>getmyheart()</code> 中，你必須將 <code>myint.c</code> 函數封裝到 <code>int (*FUNC[])(int, int)</code> 函數指標陣列。</p>
<p>特別注意 <code>getmyheart()</code> 的前兩行 <code>secret();</code>、<code>test_heart();</code> 不需要更動，用來輸出 Morris 的秘密以及測試你寫的 <code>madd()</code> 和 <code>msub</code> 的函數是否正確。Morris 藏在 <code>singletest.c</code> 的秘密不需理會。</p>
<blockquote>
<p>AC 的通關密語當然要讓 Morris 說出秘密！</p>
</blockquote>
<h3 class="content-subhead">main.c</h3><pre><code class="lang-c"><div id="highlighter_445336" class="syntaxhighlighter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="preprocessor">#include &lt;stdio.h></code></div><div class="line number2 index1 alt1"><code class="preprocessor">#include &lt;assert.h></code></div><div class="line number3 index2 alt2"><code class="preprocessor">#include "myint.h"</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="color1 bold">int</code> <code class="plain">madd(</code><code class="color1 bold">int</code> <code class="plain">a, </code><code class="color1 bold">int</code> <code class="plain">b) {</code></div><div class="line number6 index5 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold">return</code> <code class="plain">a + b;</code></div><div class="line number7 index6 alt2"><code class="plain">}</code></div><div class="line number8 index7 alt1"><code class="color1 bold">int</code> <code class="plain">msub(</code><code class="color1 bold">int</code> <code class="plain">a, </code><code class="color1 bold">int</code> <code class="plain">b) {</code></div><div class="line number9 index8 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold">return</code> <code class="plain">a - b; </code></div><div class="line number10 index9 alt1"><code class="plain">}</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="color1 bold">int</code> <code class="plain">main() {</code></div><div class="line number13 index12 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold">int</code> <code class="plain">(*FUNC[8])(</code><code class="color1 bold">int</code><code class="plain">, </code><code class="color1 bold">int</code><code class="plain">);</code></div><div class="line number14 index13 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold">int</code> <code class="plain">ret = getmyheart(FUNC);</code></div><div class="line number15 index14 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold">int</code> <code class="plain">a, b;</code></div><div class="line number16 index15 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="functions bold">scanf</code><code class="plain">(</code><code class="string">"%d %d"</code><code class="plain">, &a, &b);</code></div><div class="line number17 index16 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="functions bold">printf</code><code class="plain">(</code><code class="string">"#function = %d\n"</code><code class="plain">, ret);</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="functions bold">printf</code><code class="plain">(</code><code class="string">"test function add\n"</code><code class="plain">);</code></div><div class="line number20 index19 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="functions bold">assert</code><code class="plain">(FUNC[0](a, b) == madd(a, b));</code></div><div class="line number21 index20 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="functions bold">printf</code><code class="plain">(</code><code class="string">"test function sub\n"</code><code class="plain">);</code></div><div class="line number22 index21 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="functions bold">assert</code><code class="plain">(FUNC[1](a, b) == msub(a, b));</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold">return</code> <code class="plain">0;</code></div><div class="line number25 index24 alt2"><code class="plain">}</code></div></div></td></tr></tbody></table></div>
</code></pre>
<h3 class="content-subhead">myint.h</h3><pre><code class="lang-c"><div id="highlighter_397713" class="syntaxhighlighter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="preprocessor">#ifndef MYINT_H</code></div><div class="line number2 index1 alt1"><code class="preprocessor">#define MYINT_H</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="color1 bold">int</code> <code class="plain">getmyheart(</code><code class="color1 bold">int</code> <code class="plain">(*FUNC[])(</code><code class="color1 bold">int</code><code class="plain">, </code><code class="color1 bold">int</code><code class="plain">));</code></div><div class="line number5 index4 alt2"><code class="keyword bold">static</code> <code class="color1 bold">int</code> <code class="plain">madd(</code><code class="color1 bold">int</code> <code class="plain">a, </code><code class="color1 bold">int</code> <code class="plain">b);</code></div><div class="line number6 index5 alt1"><code class="keyword bold">static</code> <code class="color1 bold">int</code> <code class="plain">msub(</code><code class="color1 bold">int</code> <code class="plain">a, </code><code class="color1 bold">int</code> <code class="plain">b);</code></div><div class="line number7 index6 alt2"><code class="preprocessor">#endif</code></div></div></td></tr></tbody></table></div>
</code></pre>
<h3 class="content-subhead">myint.c</h3><pre><code class="lang-c"><div id="highlighter_745083" class="syntaxhighlighter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="preprocessor">#include "myint.h"</code></div><div class="line number2 index1 alt1"><code class="preprocessor">#include "singletest.c"</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="keyword bold">static</code> <code class="color1 bold">int</code> <code class="plain">madd(</code><code class="color1 bold">int</code> <code class="plain">a, </code><code class="color1 bold">int</code> <code class="plain">b) {</code></div><div class="line number5 index4 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// please match main function</code></div><div class="line number6 index5 alt1"><code class="plain">}</code></div><div class="line number7 index6 alt2"><code class="keyword bold">static</code> <code class="color1 bold">int</code> <code class="plain">msub(</code><code class="color1 bold">int</code> <code class="plain">a, </code><code class="color1 bold">int</code> <code class="plain">b) {</code></div><div class="line number8 index7 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// please match main function</code></div><div class="line number9 index8 alt2"><code class="plain">}</code></div><div class="line number10 index9 alt1"><code class="color1 bold">int</code> <code class="plain">getmyheart(</code><code class="color1 bold">int</code> <code class="plain">(*FUNC[])(</code><code class="color1 bold">int</code><code class="plain">, </code><code class="color1 bold">int</code><code class="plain">)) {</code></div><div class="line number11 index10 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">secret();</code></div><div class="line number12 index11 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">test_heart();</code></div><div class="line number13 index12 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// set your function into FUNC[0] and FUNC[1]</code></div><div class="line number14 index13 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold">return</code> <code class="plain">2;</code></div><div class="line number15 index14 alt2"><code class="plain">}</code></div></div></td></tr></tbody></table></div>
</code></pre>
<h3 class="content-subhead">singletest.c</h3><pre><code><div id="highlighter_746952" class="syntaxhighlighter nogutter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="preprocessor">#include &lt;stdio.h></code></div><div class="line number2 index1 alt1"><code class="preprocessor">#include &lt;assert.h></code></div><div class="line number3 index2 alt2"><code class="preprocessor">#include "myint.h"</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="keyword bold">static</code> <code class="keyword bold">void</code> <code class="plain">test_heart() {</code></div><div class="line number6 index5 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="functions bold">printf</code><code class="plain">(</code><code class="string">"run test heart\n"</code><code class="plain">);</code></div><div class="line number7 index6 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// Morris' secret block, don't care about this.</code></div><div class="line number8 index7 alt1"><code class="plain">}</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="keyword bold">static</code> <code class="keyword bold">void</code> <code class="plain">secret() {</code></div><div class="line number11 index10 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// Morris' secret block, don't care about this.</code></div><div class="line number12 index11 alt1"><code class="plain">}</code></div></div></td></tr></tbody></table></div>
</code></pre>