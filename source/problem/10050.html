<h2 class="content-subhead">Problem Description</h2><p>Write a program to recognize an &quot;expression&quot;. A string s is a valid expressesion if it satisfy any of the following condition.</p>
<ol>
<li>A single digit (0 to 9) is an expression.</li>
<li>If S is an expression, then -S is also an expression. </li>
<li>If S and T are both expressions, then both (S+T) and (S-T) are both expressions.</li>
<li>If S and T are both expressions, then both (S*T) and (S/T) are both expressions.</li>
</ol>
<h3 class="content-subhead">BNF</h3><pre><code><div id="highlighter_516121" class="syntaxhighlighter nogutter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain">&lt;digit> → 0|1|2|3|4|5|6|7|8|9</code></div><div class="line number2 index1 alt1"><code class="plain">&lt;expression> →&nbsp; &lt;digit></code></div><div class="line number3 index2 alt2"><code class="plain">&lt;expression> →&nbsp; - &lt;expression></code></div><div class="line number4 index3 alt1"><code class="plain">&lt;expression> → (&lt;expression> + &lt;expression>) | </code></div><div class="line number5 index4 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">(&lt;expression> - &lt;expression>) |</code></div><div class="line number6 index5 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">(&lt;expression> * &lt;expression>) |</code></div><div class="line number7 index6 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">(&lt;expression> / &lt;expression>)</code></div></div></td></tr></tbody></table></div>
</code></pre><p>For example, <code>4</code> is an expression because of condition 1. <code>(4+3)</code> is also an expression because both 4 and 3 are expressions. Similarly <code>((3*4)+5)</code> is also an expression. However, <code>(-9)</code>, <code>(3+4+5)</code> and <code>2+4</code> are not valid.</p>
<p>You need to implement the following function. It returns the value of the expression if the given string is an expression, -2147483648 otherwise. All arithmetic operations are for integers.</p>
<pre><code class="lang-c"><div id="highlighter_740701" class="syntaxhighlighter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="color1 bold">int</code> <code class="plain">expression(</code><code class="color1 bold">char</code> <code class="plain">*string);</code></div></div></td></tr></tbody></table></div>
</code></pre>
<h2 class="content-subhead">Subtasks</h2><ul>
<li>10pt. You only need to recognize the first condition, and the expression is always correct.</li>
<li>15pt. You only need to recognize the first two conditions, and the expression is always correct.</li>
<li>35pt. You only need to recognize the first three conditions, and the expression is always correct.</li>
<li>30pt. You need to recongnize the all four conditions, and the expression is always correct.</li>
<li>10pt. You need to recongnize the all four conditions. However, the expresion may be incorrect, or the &quot;divide by zero&quot; error may occur. In both cases the function should return -2147483648.</li>
</ul>
<h2 class="content-subhead">Hint</h2><ul>
<li>One can solve this problem recursively. However, we need to go through the string and remember where we are. For example, if we see a <code>&#39;(&#39;</code> we know we can recursively find an expression after it and know its value. The problem is, we need to know where to resume after that. For example, when we see <code>((3*4)+5)</code> we can recursively find the expression <code>(3*4)</code> after the first <code>(</code>, but we must know that we need to resume at <code>+</code>. That is, both the value and where we are within the expression must be properly handled during the recursion. You may find the following prototype useful. The return value is the result of the evaluation, and *length will tell you the length of the expression found.<pre><code><div id="highlighter_821258" class="syntaxhighlighter nogutter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="color1 bold">int</code> <code class="plain">expressionEval(</code><code class="color1 bold">char</code> <code class="plain">*string, </code><code class="color1 bold">int</code> <code class="plain">*length);</code></div></div></td></tr></tbody></table></div>
</code></pre></li>
<li>You can convert a char &#39;4&#39; into integer by subtracting &#39;0&#39; from it.</li>
</ul>
<h2 class="content-subhead">Source Codes</h2><h3 class="content-subhead">main.c</h3><pre><code class="lang-c"><div id="highlighter_220226" class="syntaxhighlighter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="preprocessor">#include &lt;stdio.h></code></div><div class="line number2 index1 alt1"><code class="preprocessor">#include &lt;string.h></code></div><div class="line number3 index2 alt2"><code class="preprocessor">#include "expression.h"</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="color1 bold">char</code> <code class="plain">buf[1&lt;&lt;20];</code></div><div class="line number6 index5 alt1"><code class="color1 bold">int</code> <code class="plain">main() {</code></div><div class="line number7 index6 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold">while</code> <code class="plain">(</code><code class="functions bold">scanf</code><code class="plain">(</code><code class="string">"%s"</code><code class="plain">, buf) == 1) {</code></div><div class="line number8 index7 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1 bold">int</code> <code class="plain">ret = expression(buf);</code></div><div class="line number9 index8 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="functions bold">printf</code><code class="plain">(</code><code class="string">"%d\n"</code><code class="plain">, ret);</code></div><div class="line number10 index9 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></div><div class="line number11 index10 alt2"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword bold">return</code> <code class="plain">0;</code></div><div class="line number12 index11 alt1"><code class="plain">}</code></div></div></td></tr></tbody></table></div>
</code></pre>
<h3 class="content-subhead">expression.h</h3><pre><code class="lang-c"><div id="highlighter_699580" class="syntaxhighlighter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="color1 bold">int</code> <code class="plain">expression(</code><code class="color1 bold">char</code> <code class="plain">*string);</code></div></div></td></tr></tbody></table></div>
</code></pre>
<h3 class="content-subhead">expression.c</h3><pre><code class="lang-c"><div id="highlighter_302322" class="syntaxhighlighter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="preprocessor">#include "expression.h"</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="color1 bold">int</code> <code class="plain">expression(</code><code class="color1 bold">char</code> <code class="plain">*string){</code></div><div class="line number4 index3 alt1"><code class="undefined spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">// Fill your code in here.</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="plain">}</code></div></div></td></tr></tbody></table></div>
</code></pre>
<h2 class="content-subhead">Sample Input</h2><pre><code><div id="highlighter_790000" class="syntaxhighlighter nogutter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain">0</code></div><div class="line number2 index1 alt1"><code class="plain">-5</code></div><div class="line number3 index2 alt2"><code class="plain">--5</code></div><div class="line number4 index3 alt1"><code class="plain">(4+3)</code></div><div class="line number5 index4 alt2"><code class="plain">((3*4)+5)</code></div><div class="line number6 index5 alt1"><code class="plain">((7/3)*((3/7)+1))</code></div><div class="line number7 index6 alt2"><code class="plain">((3+3)/(2-2))</code></div><div class="line number8 index7 alt1"><code class="plain">(-9)</code></div><div class="line number9 index8 alt2"><code class="plain">-(3+5)(3+5)</code></div></div></td></tr></tbody></table></div>
</code></pre><h2 class="content-subhead">Sample Output</h2><pre><code><div id="highlighter_662120" class="syntaxhighlighter nogutter  "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain">0</code></div><div class="line number2 index1 alt1"><code class="plain">-5</code></div><div class="line number3 index2 alt2"><code class="plain">5</code></div><div class="line number4 index3 alt1"><code class="plain">7</code></div><div class="line number5 index4 alt2"><code class="plain">17</code></div><div class="line number6 index5 alt1"><code class="plain">2</code></div><div class="line number7 index6 alt2"><code class="plain">-2147483648</code></div><div class="line number8 index7 alt1"><code class="plain">-2147483648</code></div><div class="line number9 index8 alt2"><code class="plain">-2147483648</code></div></div></td></tr></tbody></table></div>
</code></pre>